<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:GreenCorner.ViewModels"
             x:Class="GreenCorner.Views.ProductDetailsPage"
             Title="Details"
             BackgroundColor="{StaticResource BackgroundLight}"
             Shell.TabBarIsVisible="False">

    <ScrollView>
        <VerticalStackLayout Spacing="20">
            
            <!-- Image Header -->
            <Grid HeightRequest="400">
                <Image Source="{Binding Plant.ImageUrl}" Aspect="AspectFill"/>
                <Button Text="Back" Command="{Binding GoBackCommand}" 
                        HorizontalOptions="Start" VerticalOptions="Start" Margin="20"
                        Style="{StaticResource SecondaryButtonStyle}" BackgroundColor="{StaticResource White}"/>
            </Grid>

            <!-- Details Content -->
            <VerticalStackLayout Padding="20" Spacing="15" BackgroundColor="{StaticResource BackgroundLight}" Margin="0,-30,0,0">
                <Border Style="{StaticResource CardFrame}" Padding="20" Margin="0" Shadow="{Null}"> <!-- Reset shadow for inline container look or keep it -->
                    <VerticalStackLayout Spacing="10">
                        <Label Text="{Binding Plant.Name}" Style="{StaticResource Headline2}" TextColor="{StaticResource Primary}"/>
                        
                        <FlexLayout JustifyContent="SpaceBetween" AlignItems="Center">
                             <Label Text="{Binding Plant.Price, StringFormat='${0:F2}'}" FontSize="24" FontAttributes="Bold" TextColor="{StaticResource TextLight}"/>
                             <Label Text="{Binding Plant.Tag}" Style="{StaticResource BadgeLabel}"/>
                        </FlexLayout>

                        <BoxView HeightRequest="1" Color="{StaticResource Gray200}" Margin="0,10"/>

                        <Grid ColumnDefinitions="*,*" ColumnSpacing="20">
                            <VerticalStackLayout Grid.Column="0">
                                <Label Text="Difficulty" FontSize="12" TextColor="{StaticResource Gray500}"/>
                                <Label Text="{Binding Plant.Difficulty}" FontAttributes="Bold"/>
                            </VerticalStackLayout>
                            <VerticalStackLayout Grid.Column="1">
                                <Label Text="Light" FontSize="12" TextColor="{StaticResource Gray500}"/>
                                <Label Text="{Binding Plant.LightRequirement}" FontAttributes="Bold"/>
                            </VerticalStackLayout>
                        </Grid>

                        <Label Text="Description" FontAttributes="Bold" Margin="0,10,0,0"/>
                        <Label Text="{Binding Plant.Description}" LineHeight="1.5"/>

                        <Button Text="{Binding AddToCartText}" 
                                Command="{Binding AddToCartCommand}" 
                                IsEnabled="{Binding IsAddedToCart, Converter={x:StaticResource InvertedBoolConverter}}" 
                                Margin="0,20,0,0"
                                Style="{StaticResource PrimaryButtonStyle}"/>
                         <!-- Note: InvertedBoolConverter needs to be added to RESOURCES or just use simple logic in VM to disable command -->
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>
        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
